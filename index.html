<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
        body{margin:0px;}
        svg {
        //border:solid 1px #666;
            overflow:hidden;
        }

        path {
            fill:yellow;
            stroke:#000;
            stroke-width:.5px;
        }

        circle {
            fill:#ccc;
            stroke:#000;
            pointer-events:none;
        }
        #button {position:absolute;top:10px;left:400px;}
        #title {position:absolute;top:12px;left:0px;width:500px;text-align:center;}
        .btn { display:inline-block;*display:inline;/* IE7 inline-block hack */ *zoom:1;padding:4px 10px 4px;margin-bottom:0;font-size:13px;line-height:18px;color:#333333;text-align:center;text-shadow:0 1px 1px rgba(255,255,255,0.75);vertical-align:middle;background-color:#f5f5f5;background-image:-moz-linear-gradient(top,#ffffff,#e6e6e6);background-image:-ms-linear-gradient(top,#ffffff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#ffffff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#ffffff,#e6e6e6);background-image:-o-linear-gradient(top,#ffffff,#e6e6e6);background-image:linear-gradient(top,#ffffff,#e6e6e6);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#e6e6e6',GradientType=0);border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);filter:progid:dximagetransform.microsoft.gradient(enabled=false);border:1px solid #cccccc;border-bottom-color:#b3b3b3;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);cursor:pointer;*margin-left:.3em;} .btn:hover,.btn:active,.btn.active,.btn.disabled,.btn[disabled] { background-color:#e6e6e6;} .btn:active,.btn.active { background-color:#cccccc \9;} .btn:first-child { *margin-left:0;} .btn:hover { color:#333333;text-decoration:none;background-color:#e6e6e6;background-position:0 -15px;-webkit-transition:background-position 0.1s linear;-moz-transition:background-position 0.1s linear;-ms-transition:background-position 0.1s linear;-o-transition:background-position 0.1s linear;transition:background-position 0.1s linear;} .btn:focus { outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px;} .btn.active,.btn:active { background-image:none;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);box-shadow:inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);background-color:#e6e6e6;background-color:#d9d9d9 \9;outline:0;} .btn.disabled,.btn[disabled] { cursor:default;background-image:none;background-color:#e6e6e6;opacity:0.65;filter:alpha(opacity=65);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;} .btn-mini { padding:2px 6px;font-size:11px;line-height:14px;}
        svg {border:1px solid black;}
        </style></head>
<body>
<script src="./d3.v2.min.js"></script>
<div id="chart" style="width:500px;height:250px">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="500" height="200">
        <line x1="0" x2="0" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="20" x2="20" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="40" x2="40" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="60" x2="60" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="80" x2="80" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="100" x2="100" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="120" x2="120" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="140" x2="140" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="160" x2="160" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="180" x2="180" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="200" x2="200" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="220" x2="220" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="240" x2="240" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="260" x2="260" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="280" x2="280" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="300" x2="300" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="320" x2="320" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="340" x2="340" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="360" x2="360" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="380" x2="380" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="400" x2="400" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="420" x2="420" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="440" x2="440" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="460" x2="460" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="480" x2="480" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line x1="500" x2="500" y1="40" y2="250" style="stroke: rgb(238, 238, 238);"></line><line y1="40" y2="40" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="60" y2="60" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="80" y2="80" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="100" y2="100" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="120" y2="120" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="140" y2="140" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="160" y2="160" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="180" y2="180" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="200" y2="200" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="220" y2="220" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><line y1="240" y2="240" x1="0" x2="500" style="stroke: rgb(238, 238, 238);"></line><rect id="s0" x="50" y="150" width="80" height="100" style="stroke: none; fill: steelblue;"></rect><rect id="s1" x="150" y="100" width="80" height="150" style="stroke: none; fill: steelblue;"></rect><rect id="s2" x="250" y="120" width="80" height="130" style="stroke: none; fill: steelblue;"></rect><rect id="s3" x="350" y="80" width="80" height="170" style="stroke: none; fill: darkred;"></rect></svg>
    <div id="title">Bar chart (unanimated)</div>


</div>

<script>

    var possibleValues=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
    var hash = window.location.hash;

    if(hash.length) {
        hash=hash.substring(1);
        if(!possibleValues[hash]) {
            hash=0;
        }
    }
    else  {
        hash=0;
    }



    data={
        0:{
            title:"Position",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:50,y:75,width:50,height:50},
                        style:{stroke:"blue",fill:"none"}
                    },
                    transition:{
                        attr:{x:150}
                    }
                },
                {
                    type:"circle",
                    init:{
                        attr:{cx:225,cy:75,r:25},
                        style:{stroke:"green",fill:"none"}
                    },
                    transition:{
                        attr:{cy:150}
                    }
                },
                {
                    type:"path",
                    init:{
                        attr:{d:"M 0,0 l 50,13 l -25,25 z", transform:"translate(350,75)"},
                        style:{stroke:"red",fill:"none"}
                    },
                    transition:{
                        attr:{transform:"translate(250,50)"}
                    }
                }
            ]
        },
        1:{
            title:"Sizes",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:50,y:50,width:50,height:50},
                        style:{stroke:"blue",fill:"none"}
                    },
                    transition:{
                        attr:{width:100,height:100}
                    }
                },
                {
                    type:"circle",
                    init:{
                        attr:{cx:225,cy:100,r:25},
                        style:{stroke:"green",fill:"none"}
                    },
                    transition:{
                        attr:{r:50}
                    }
                },
                {
                    type:"path",
                    init:{
                        attr:{d:"M 0,0 l 50,13 l -25,25 z", transform:"translate(350,75)"},
                        style:{stroke:"red",fill:"none"}
                    },
                    transition:{
                        attr:{d:"M 0,0 l 100,25 l -50,50 z"}
                    }
                }
            ]
        },
        2:{
            title:"Colors",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:50,y:50,width:100,height:100},
                        style:{fill:"blue",stroke:"blue"}
                    },
                    transition:{
                        style:{fill:"azure"}
                    }
                },
                {
                    type:"circle",
                    init:{
                        attr:{cx:225,cy:100,r:50},
                        style:{fill:"green",stroke:"green"}
                    },
                    transition:{
                        style:{fill:"darkorange"}
                    }
                },
                {
                    type:"path",
                    init:{
                        attr:{d:"M 0,0 l 100,25 l -50,50 z", transform:"translate(350,75)"},
                        style:{fill:"red",stroke:"red"}
                    },
                    transition:{
                        style:{fill:"hotpink"}
                    }
                }
            ]
        },
        3:{title:"Opacity",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:140,y:60,width:220,height:120},
                        style:{fill:"blue",opacity:1}
                    },
                    transition:{
                        style:{opacity:0}
                    }
                }]},
        4:{
            title:"Simple movement",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:40,y:80,width:60,height:60},
                        style:{stroke:"blue",fill:"none"}
                    },
                    transition:{
                        attr:{x:320}
                    }
                }
            ]
        },
        5:{title:"Duration and delay",
            shapes:[
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:80},
                        style:{fill:"blue",stroke:"none"},
                        text:"Duration: 250ms, no delay"
                    },
                    transition:{
                        attr:{x:340},
                        duration:250
                    }
                },
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:120},
                        style:{fill:"red",stroke:"none"},
                        text:"Duration: 2s"
                    },
                    transition:{
                        attr:{x:340},
                        duration:2000
                    }
                },
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:160},
                        style:{fill:"green",stroke:"none"},
                        text:"Duration: 1s, delay: 1s"
                    },
                    transition:{
                        attr:{x:340},
                        duration:5000,
                        delay:1000
                    }
                }
            ]},
        6:{title:"Easing",
            shapes:[
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:80},
                        style:{fill:"blue",stroke:"none"},
                        text:"cubic-in-out (default)"
                    },
                    transition:{
                        attr:{x:340},
                        duration:2000
                    }
                },
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:120},
                        style:{fill:"red",stroke:"none"},
                        text:"elastic"
                    },
                    transition:{
                        attr:{x:340},
                        duration:2000,
                        ease:"elastic"
                    }
                },
                {
                    type:"text",
                    init:{
                        attr:{x:20,y:160},
                        style:{fill:"green",stroke:"none"},
                        text:"linear"
                    },
                    transition:{
                        attr:{x:340},
                        duration:2000,
                        ease:"linear"
                    }
                }
            ]},
        7:{title:"Transformation",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            "d":"m 0,-60 l 20,40 l 40,20 l -40,20 l -20,40 l -20,-40 l -40,-20 l 40,-20 z",
                            "transform":"translate(250,120)"//" rotate(-45) "
                        },
                        style:{stroke:"blue",fill:"none"}
                    },
                    transition:{
                        attr:{
                            "d":"m 0,-60 l 40,20 l 20,40 l -20,40 l -40,20 l -40,-20 l -20,-40 l 20,-40 z",
                            //"transform":"translate(250,120)"// rotate(45)"
                        }

                    }
                }
            ]},
        8:{title:"Transformation (line chart)",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            "d":"m 0,120 L 20,110 L 40,170 L 60,190 L 80,180 L 100,160 L 120,165 L 140,140 L 160,120 L 180,130 L 200,150 L 220,130 L 240,120 L 260,110 L 280,90 L 300,80 L 320,85 L 340,100 L 360,90 L 380,80 L 400,70 L 420,50 L 440,45 L 460,50 L 500,40",
                        },
                        style:{stroke:"blue","stroke-width":2,fill:"none"}
                    },
                    transition:{
                        attr:{
                            "d":"m 0,120 L 20,105 L 40,100 L 60,95 L 80,100 L 100,105 L 120,100 L 140,90 L 160,85 L 180,80 L 200,60 L 220,70 L 240,80 L 260,100 L 280,110 L 300,150 L 320,130 L 340,125 L 360,120 L 380,130 L 400,140 L 420,170 L 440,150 L 460,160 L 500,180"
                        }
                    }
                }
            ]},
        12:{title:"Line chart (no transition)",
            shapes:[
                {
                    type:"path",
                    init:{
                        duration:0.0001,
                        attr:{
                            "d":"m 0,120 L 20,110 L 40,170 L 60,190 L 80,180 L 100,160 L 120,165 L 140,140 L 160,120 L 180,130 L 200,150 L 220,130 L 240,120 L 260,110 L 280,90 L 300,80 L 320,85 L 340,100 L 360,90 L 380,80 L 400,70 L 420,50 L 440,45 L 460,50 L 500,40",
                        },
                        style:{stroke:"blue","stroke-width":2,fill:"none"}
                    },
                    transition:{
                        duration:0.0001,
                        attr:{
                            "d":"m 0,120 L 20,105 L 40,100 L 60,95 L 80,100 L 100,105 L 120,100 L 140,90 L 160,85 L 180,80 L 200,60 L 220,70 L 240,80 L 260,100 L 280,110 L 300,150 L 320,130 L 340,125 L 360,120 L 380,130 L 400,140 L 420,170 L 440,150 L 460,160 L 500,180"
                        }
                    }
                }
            ]},
        9:{title:"double transition",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:0,y:40,width:20,height:20},
                        style:{fill:"blue",stroke:"none"}
                    },
                    transition:{
                        attr:{x:480},
                        duration:5000,
                        next:{
                            attr:{y:180},
                            duration:5000,
                        }
                    }
                }]
        },
        10:{title:"Adding objects",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:0,y:40,width:20,height:20},
                        style:{fill:"blue",stroke:"none"}
                    },
                    transition:{
                        attr:{x:480,y:80},
                        next:{
                            type:"circle",
                            attr:{cx:490,cy:90,r:0},
                            style:{fill:"steelblue",opacity:.5},
                            next:{
                                style:{opacity:0},
                                attr:{r:250},
                                next:{remove:true}
                            }
                        }
                    }
                }]
        },

        11:{title:"All combined!",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            "d":"m 0,-60 l 20,40 l 40,20 l -40,20 l -20,40 l -20,-40 l -40,-20 l 40,-20 z",
                            "transform":"translate(60,120)"
                        },
                        style:{stroke:"blue",fill:"white"}
                    },
                    transition:{
                        attr:{
                            "d":"m 0,-60 l 40,20 l 20,40 l -20,40 l -40,20 l -40,-20 l -20,-40 l 20,-40 z",
                            "transform":"translate(440,120) rotate(180)"
                        },
                        style:{stroke:"white",fill:"blue"},
                        next:{
                            type:"circle",
                            attr:{cx:440,cy:120,r:250},
                            style:{fill:"green",opacity:0},
                            next:{
                                attr:{r:0},
                                style:{fill:"yellow",opacity:1},
                                next:{remove:true}
                            }
                        }
                    }
                }
            ]
        },
        13:{title:"Line chart (unrolling)",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            "d":"m0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120"
                        },
                        style:{stroke:"blue","stroke-width":2,fill:"none"}
                    },
                    transition:{duration:50,delay:50,ease:"linear",attr:{"d":"m0,120L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110"},
                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170"},
                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190"},
                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180"},
                                    next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160"},
                                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165"},
                                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140"},
                                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120"},
                                                    next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130"},
                                                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150"},
                                                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130"},
                                                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120"},
                                                                    next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110"},
                                                                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90"},
                                                                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80"},
                                                                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85"},
                                                                                    next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L340,100L340,100L340,100L340,100L340,100L340,100L340,100L340,100"},
                                                                                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L360,90L360,90L360,90L360,90L360,90L360,90L360,90"},
                                                                                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L380,80L380,80L380,80L380,80L380,80L380,80"},
                                                                                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L400,70L400,70L400,70L400,70L400,70"},
                                                                                                    next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L420,50L420,50L420,50L420,50"},
                                                                                                        next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L440,45L440,45L440,45"},
                                                                                                            next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L460,50L460,50L460,50"},
                                                                                                                next:{duration:25,ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L460,50L500,40L500,40"},
                                                                                                                },
                                                                                                            },
                                                                                                        },
                                                                                                    },
                                                                                                },
                                                                                            },
                                                                                        },
                                                                                    },
                                                                                },
                                                                            },
                                                                        },
                                                                    },
                                                                },
                                                            },
                                                        },
                                                    },
                                                },
                                            },
                                        },
                                    },
                                },
                            },
                        }
                    }}
            ]},
        14:{title:"Line chart (unrolling painfully slow)",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            "d":"m0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120L0,120"
                        },
                        style:{stroke:"blue","stroke-width":2,fill:"none"}
                    },
                    transition:{ease:"linear",attr:{"d":"m0,120L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110L20,110"},
                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170L40,170"},
                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190L60,190"},
                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180L80,180"},
                                    next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160L100,160"},
                                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165L120,165"},
                                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140L140,140"},
                                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120L160,120"},
                                                    next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130L180,130"},
                                                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150L200,150"},
                                                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130L220,130"},
                                                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120L240,120"},
                                                                    next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110L260,110"},
                                                                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90L280,90"},
                                                                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80L300,80"},
                                                                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85L320,85"},
                                                                                    next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L340,100L340,100L340,100L340,100L340,100L340,100L340,100L340,100"},
                                                                                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L360,90L360,90L360,90L360,90L360,90L360,90L360,90"},
                                                                                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L380,80L380,80L380,80L380,80L380,80L380,80"},
                                                                                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L400,70L400,70L400,70L400,70L400,70"},
                                                                                                    next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L420,50L420,50L420,50L420,50"},
                                                                                                        next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L440,45L440,45L440,45"},
                                                                                                            next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L460,50L460,50L460,50"},
                                                                                                                next:{ease:"linear",attr:{"d":"m0,120L20,110L40,170L60,190L80,180L100,160L120,165L140,140L160,120L180,130L200,150L220,130L240,120L260,110L280,90L300,80L320,85L340,100L360,90L380,80L400,70L420,50L440,45L460,50L500,40L500,40"},
                                                                                                                },
                                                                                                            },
                                                                                                        },
                                                                                                    },
                                                                                                },
                                                                                            },
                                                                                        },
                                                                                    },
                                                                                },
                                                                            },
                                                                        },
                                                                    },
                                                                },
                                                            },
                                                        },
                                                    },
                                                },
                                            },
                                        },
                                    },
                                },
                            },
                        }
                    }}
            ]},
        15:{title:"Bar chart (unanimated)",
            button:"none",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:50,y:150,width:80,height:100},
                        style:{stroke:"none",fill:"steelblue"}
                    }
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:150,y:100,width:80,height:150},
                        style:{stroke:"none",fill:"steelblue"}
                    }
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:250,y:120,width:80,height:130},
                        style:{stroke:"none",fill:"steelblue"}
                    }
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:350,y:80,width:80,height:170},
                        style:{stroke:"none",fill:"darkred"}
                    }
                }
            ]},
        16:{title:"Bar chart (animated)",
            shapes:[
                {
                    type:"rect",
                    init:{
                        attr:{x:50,y:250,width:80,height:0},
                        style:{stroke:"none",fill:"steelblue"}
                    },
                    transition:{attr:{y:150,height:100},duration:500}
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:150,y:250,width:80,height:0},
                        style:{stroke:"none",fill:"steelblue"}
                    },
                    transition:{attr:{y:100,height:150},duration:500,delay:100}
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:250,y:250,width:80,height:0},
                        style:{stroke:"none",fill:"steelblue"}
                    },
                    transition:{attr:{y:120,height:130},duration:500,delay:200}
                },
                {
                    type:"rect",
                    init:{
                        attr:{x:350,y:250,width:80,height:0},
                        style:{stroke:"none",fill:"steelblue"}
                    },
                    transition:{attr:{y:80,height:170},duration:500,delay:300,next:{style:{fill:"darkred"},duration:500}}
                },
            ]},
        17:{title:"Line chart (with blank state in between)",
            shapes:[
                {
                    type:"path",
                    init:{
                        attr:{
                            d:"m 0,120 L 20,110 L 40,170 L 60,190 L 80,180 L 100,160 L 120,165 L 140,140 L 160,120 L 180,130 L 200,150 L 220,130 L 240,120 L 260,110 L 280,90 L 300,80 L 320,85 L 340,100 L 360,90 L 380,80 L 400,70 L 420,50 L 440,45 L 460,50 L 500,40",
                        },
                        style:{stroke:"blue","stroke-width":2,fill:"none"}
                    },
                    transition:{
                        attr:{d:"m0,200L20,200L40,200L60,200L80,200L100,200L120,200L140,200L160,200L180,200L200,200L220,200L240,200L260,200L280,200L300,200L320,200L340,200L360,200L380,200L400,200L420,200L440,200L460,200L500,200"},
                        next:{
                            attr:{
                                d:"m 0,120 L 20,105 L 40,100 L 60,95 L 80,100 L 100,105 L 120,100 L 140,90 L 160,85 L 180,80 L 200,60 L 220,70 L 240,80 L 260,100 L 280,110 L 300,150 L 320,130 L 340,125 L 360,120 L 380,130 L 400,140 L 420,170 L 440,150 L 460,160 L 500,180"
                            }
                        }
                    }
                }
            ]},
    };

    data=data[hash];
    var svg=d3.select("svg");
    svg.selectAll(".vline").data(d3.range(26)).enter()
        .append("line")
        .attr("x1",function(d){return d*20;})
        .attr("x2",function(d){return d*20;})
        .attr("y1",function(d){return 40;})
        .attr("y2",function(d){return 250;})
        .style("stroke","#eee");
    svg.selectAll(".vline").data(d3.range(2,13)).enter()
        .append("line")
        .attr("y1",function(d){return d*20;})
        .attr("y2",function(d){return d*20;})
        .attr("x1",function(d){return 0;})
        .attr("x2",function(d){return 500;})
        .style("stroke","#eee");

    var button=d3.select("#button");
    if (data.button==="none") {button.remove();}
    var mode=0;
    var modes=[{state:"init",title:"Transition"},{state:"transition",title:"Reset"}];

    d3.select("#title").html(data.title);
    data.shapes.forEach(function(d,i) {

        // here we create shapes according to the parameters of the data file.

        var myshape=svg.append(d.type).attr("id","s"+i); // taking into account the type of the shape,
        var state=d.init;                                 // noting that these are the initial state.
        set(myshape,state);
    })

    button.on("click",function() {
        mode=1-mode;
        button.html(modes[mode].title);
        data.shapes.forEach(change)
    });

    function change(d,i){
        var state=d[modes[mode].state];
        var myshape=svg.select("#s"+i).transition().duration(state.duration||1000).delay(state.delay||0).ease(state.ease||"cubic-in-out");
        // so transition if going through a transition, reset if going through a reset
        set(myshape,state);

    }

    function set(selection,state,createTransition) {
        if(state.remove)  {
            selection.remove();return;
        }

        d3.keys(state.attr).forEach(function(a) {
            selection.attr(a, state.attr[a]);                     // all of its attributes
        });
        if (state.text) {
            selection.text(state.text);
        };
        d3.keys(state.style).forEach(function(s) {
            selection.style(s, state.style[s]);                   // and all of its style properties
        });

        if(state.next)  {
            var next=state.next;
            if (next.type) {
                selection.each("end",function() {
                    set(svg.append(next.type),next,true);                  // we are creating a new shape
                })
            }
            else {
                if(createTransition)  {
                    selection=selection.transition().duration(0);
                }
                selection.each("end",function() {
                    set(d3.select(this).transition().duration(next.duration||1000).delay(next.delay||0).ease(state.ease||"cubic-in-out"),next);
                });
            }
        }
    }
</script>



; </body></html>